@use '../base/variables' as var;
@use '../base/mixins' as mix;
@use 'sass:color';

/* ===== Services: layout base ===== */
.services__grid{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: clamp(2.5rem, 8vw, 6rem);
  align-items: center;
}

.services__content h2{
  font-weight: var.$black-f;
  font-size: clamp(1.6rem, 3vw, 2.2rem);
  line-height: 1.2;
  margin: .2rem 0 1rem;
}

.services__content h1, h2{
    justify-content: center;
    align-items: center;
    text-align: center;
}

.services__content p{
    font-size: clamp(1.2rem, 3.5vw, 1.8rem);
}


/* ===== Contenedor de imágenes ===== */
.services__media{
  position: relative;
  min-height: clamp(380px, 46vw, 520px);
}

/* Tarjeta principal (fondo crema como en la referencia) */
.media-card{
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: #f5f7fa;                /* o var.$bg-light si prefieres */
  border-radius: 24px;
  overflow: hidden;
  box-shadow: 0 12px 36px rgba(0,0,0,.12);
  display: grid;
}
.media-card__img{
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Tarjeta flotante encima (borde blanco + sombra) */
.media-float{
  position: absolute;
  right: clamp(-8%, -6%, -4%);
  bottom: clamp(-10%, -8%, -6%);
  width: clamp(42%, 52%, 56%);
  aspect-ratio: 4 / 3;
  margin: 0;
  padding: 0;
  border-radius: 18px;
  overflow: hidden;
  background: #fff;
  border: 6px solid var.$white;
  box-shadow: 0 18px 48px rgba(0,0,0,.18);

  transform: translateZ(0);           /* para subpixel suave */
  transition: transform .35s ease, box-shadow .35s ease;
}
.media-float img{
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Hover sutil */
.services__media:hover .media-float{
  transform: translateY(-6px);
  box-shadow: 0 24px 60px rgba(0,0,0,.22);
}

/* ===== Responsive ===== */
@media (max-width: 980px){
  .services__grid{
    grid-template-columns: 1fr;
  }
  .services__media{
    min-height: 340px;
    max-width: 760px;
    margin-inline: auto;
  }
  .media-float{
    right: -2%;
    bottom: -6%;
    width: 58%;
  }
}

/* ===== Performance ===== */

.performance{
  /* Imagen de fondo por CSS custom prop */
  --bg: url('/build/img/perf-bg.webp');
  position: relative;
  isolation: isolate;
  background: #0b1f33; /* fallback */
  min-height: clamp(420px, 60vh, 640px);
  display: grid;
  align-items: center;

  /* capa de imagen */
  &::before{
    content:"";
    position:absolute; inset:0;
    background: var(--bg) center/cover no-repeat;
    z-index:-2;
  }
  /* overlay para legibilidad */
  &::after{
    content:"";
    position:absolute; inset:0;
    background: linear-gradient(90deg, rgba(0,0,0,.55) 0%, rgba(0,0,0,.35) 40%, rgba(0,0,0,.25) 70%, rgba(0,0,0,.15) 100%);
    z-index:-1;
  }
}

.performance__grid{
  display:grid;
  grid-template-columns: 1.4fr .9fr; /* texto más ancho, card a la derecha */
  gap: clamp(1.2rem, 4vw, 2.4rem);
  align-items:center;
}

.performance__copy{
  color: var.$white;
  max-width: 62ch;
}
.performance__copy h2{
  font-weight: var.$black-f;
  font-size: clamp(1.8rem, 3.5vw, 2.6rem);
  line-height: 1.15;
  margin: 0 0 .8rem;
  text-shadow: 0 2px 18px rgba(0,0,0,.35);
}
.performance__copy p{
  margin-top: .8rem;
  font-size: clamp(1rem, 1.3vw, 1.15rem);
}

/* Bullets con puntos • grandes como en el mock */
.performance__bullets{
  list-style: none;
  padding: 0;
  margin: .6rem 0;
  display: grid;
  gap: .75rem;
  font-size: clamp(1rem, 1.35vw, 1.25rem);
}
.performance__bullets li{
  position: relative;
  padding-left: 1.2rem;
}
.performance__bullets li::before{
  content: "•";
  position: absolute;
  left: 0; top: 0;
  line-height: 1;
  color: var.$white;
  opacity: .9;
  font-weight: var.$bold;
}

/* Tarjeta lateral */
.performance__card{
  margin: 0;
  justify-self: end;
  width: min(520px, 90%);
  aspect-ratio: 16/9;
  border-radius: 22px;
  overflow: hidden;
  background: #fff;
  box-shadow: 0 18px 48px rgba(0,0,0,.28);
  border: 6px solid rgba(255,255,255,.85);
}
.performance__card img{
  width:100%; height:100%; object-fit: cover; display:block;
}

/* Hover sutil (opcional) */
.performance__card:hover{
  transform: translateY(-4px);
  transition: transform .25s ease, box-shadow .25s ease;
  box-shadow: 0 24px 60px rgba(0,0,0,.32);
}

/* Responsive */
@media (max-width: 1000px){
  .performance__grid{
    grid-template-columns: 1fr;
  }
  .performance__card{
    justify-self: start;
    margin-top: .8rem;
    width: min(640px, 95%);
  }
}

/* ===== Productivity ===== */

.kpi__grid{
  display:grid;
  grid-template-columns: 1.1fr 1fr;   /* texto un poco más ancho */
  gap: clamp(1.5rem, 4vw, 3rem);
  align-items:center;
}

/* Texto */
.kpi__copy h2{
  font-weight: var.$bold;
  font-size: clamp(2.6rem, 4vw, 3.3rem);
  line-height: 1.15;
  margin: 0 0 .8rem;
}

.kpi__copy h3{ 
    font-size: clamp(1.6rem, 3vw, 2.3rem);  
    font-weight: var.$bold;
    margin: 1.2rem 0 .4rem;
}

.kpi__copy p{ 
    font-size: clamp(1.2rem, 2.7vw, 1.8rem);  
}

/* ---------- Imagen con “marco de hoja” ---------- */

.kpi__frame{
  /* grosor del “borde” = padding */
  background: transparent;                  /* color del borde/marco */
  padding: var(--frame-pad);
  border-radius: 28px;               /* radio del marco externo */
  box-shadow: 0 18px 48px rgba(0,0,0,.12);
  display: inline-block;             /* ajusta al contenido */
}

/* contenedor que recorta la imagen + hace la curva */
.kpi__media{
  position: relative;
  margin: 0;
  width: min(720px, 100%);
  aspect-ratio: 16/11;               /* ajusta según tu foto */
  overflow: hidden;
  border-radius: 24px;               /* radio del contenedor interno */
}
.kpi__media img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}



/* Sombra sutil en el borde de la curva para que se lea como recorte real */
.kpi__media::before{
  content: "";
  position: absolute;
  left: calc(var(--cut-left) + 10%);
  top:  var(--cut-top);
  width: calc(var(--cut-w) - 18%);
  height: var(--cut-h);
  border-radius: 50%;
  background:
    radial-gradient(closest-side at 100% 50%,
      rgba(0,0,0,.18), rgba(0,0,0,0) 65%);
  filter: blur(2px);
  pointer-events: none;
}

/* Responsive: afina la curva y el padding */
@media (max-width: 900px){
  .kpi__frame{ --frame-pad: 10px; }
  .kpi__media{
    width: 100%;
    aspect-ratio: 16/12;
    border-radius: 22px;
  }
  .kpi__media::after{
    --cut-left: -24%;
    --cut-w:    62%;
  }
  .kpi__media::before{
    left: calc(var(--cut-left) + 12%);
    width: calc(var(--cut-w) - 16%);
  }
}


/* Back Office BPO */


.bpo-hero{
  /* Imagen controlada por custom prop para reusar el bloque */
  --bg: url('/build/img/backoffice-bpo.webp');

  position: relative;
  isolation: isolate;
  min-height: clamp(420px, 68vh, 720px);
  display: grid;
  align-items: center;
  color: var.$white;
  overflow: hidden;

  /* Capa: imagen */
  &::before{
    content:"";
    position:absolute; inset:0;
    background: var(--bg) center/cover no-repeat;
    z-index:-2;
    transform: translateZ(0);
  }

  /* Capa: degradado para legibilidad (izq→der, azul a azul oscuro) */
  &::after{
    content:"";
    position:absolute; inset:0;
    background:
      linear-gradient(90deg,
        rgba(0,33,115,.70) 0%,
        rgba(9,33,121,.65) 20%,
        rgba(16,21,98,.55) 45%,
        rgba(10,12,60,.60) 70%,
        rgba(5,10,36,.75) 100%);
    z-index:-1;
  }
}

/* Dots sutiles (opcional). Comenta si no los quieres */
.bpo-hero{
  --dots: radial-gradient(circle at center, rgba(255,255,255,.18) 0 2px, transparent 3px);
  mask-image: none;

  .bpo-hero__inner::before{
    content:"";
    position:absolute;
    left: -10%;
    top: 0;
    width: min(720px, 55%);
    height: 100%;
    background:
      radial-gradient(1200px 100% at -10% 50%, rgba(255,255,255,.06), transparent 60%),
      repeating-radial-gradient(circle at 0% 50%, rgba(255,255,255,.16) 0 2px, transparent 3px 22px);
    opacity:.22;
    pointer-events:none;
  }
}

.bpo-hero__inner{
  position: relative;
  width: 100%;
}

.bpo-hero__copy{
  margin-left: auto;               /* empuja a la derecha */
  max-width: 860px;                /* ancho del bloque de texto */
  padding: clamp(1rem, 3vw, 2rem) 0;
}

.bpo-hero__copy h2{
  font-weight: var.$black-f;
  font-size: clamp(1.8rem, 4vw, 2.8rem);
  line-height: 1.1;
  margin: 0 0 1rem;
  text-shadow: 0 2px 20px rgba(0,0,0,.35);
}

.bpo-hero__copy p{
  font-size: clamp(1.05rem, 1.4vw, 1.25rem);
  line-height: 1.6;
  text-wrap: balance;
  text-shadow: 0 1px 12px rgba(0,0,0,.35);
}

/* Responsive */
@media (max-width: 980px){
  .bpo-hero{
    min-height: 60vh;
  }
  .bpo-hero__copy{
    margin-left: 0;
    max-width: 48ch;
  }
}


/* ===== Impact Section ===== */
.impact{
  position: relative;
  isolation: isolate;
  background: #f5f5f5;
}

/* Grid principal */
.impact__grid{
  display: grid;
  grid-template-columns: 1.05fr 1fr;          /* img un poco más ancha */
  gap: clamp(1.2rem, 5vw, 3rem);
  align-items: center;
}

/* Tarjeta de imagen */
.impact__media{
  margin: 0;
  width: 100%;
  max-width: 720px;
  aspect-ratio: 16/9;
  border-radius: 24px;
  overflow: hidden;
  background: #fff;
  box-shadow: 0 18px 46px rgba(0,0,0,.14);
}
.impact__media img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Texto */
.impact__copy{
  position: relative;
  z-index: 1; /* por encima de los puntos */
  max-width: 56ch;
}
.impact__copy h2{
  margin: 0 0 .9rem;
  font-weight: var.$bold;
  line-height: 1.05;
  font-size: clamp(1.8rem, 3.8vw, 3rem);
  color: var.$black;
}
.impact__copy p{
  font-size: clamp(1.3rem, 1.75vw, 1.45rem);
  line-height: 1.7;
  color: #222;
}

/* Fondo de puntos radial detrás del texto (derecha) */
.impact__copy::after{
  content: "";
  position: absolute;
  inset: -12% -14% -12% -12%;        /* extiende un poco fuera del bloque */
  z-index: -1;
  pointer-events: none;

  /* dos capas: halo suave + patrón de puntos */
  background:
    radial-gradient(60% 60% at 25% 40%,
      rgba(0,0,0,0.04), transparent 70%),
    radial-gradient(1600px 1200px at 40% 50%,
      rgba(70,90,200,.08), transparent 55%),
    /* puntos */
    radial-gradient(circle, rgba(90,90,120,.16) 2px, transparent 3px);
  background-repeat: no-repeat, no-repeat, repeat;
  background-size:
    100% 100%,
    100% 100%,
    22px 22px;                        /* separación del patrón */
  background-position:
    center,
    center,
    center;
  mask-image: radial-gradient(80% 65% at 55% 50%, #000 55%, transparent 75%);
  opacity: .6;
}

/* Responsive */
@media (max-width: 1024px){
  .impact__grid{
    grid-template-columns: 1fr;
  }
  .impact__media{
    justify-self: center;
    max-width: 860px;
  }
  .impact__copy{
    max-width: 60ch;
  }
  .impact__copy::after{
    inset: -8% -10% -6% -6%;
    opacity: .55;
  }
}

/* ===== Collections (fondo imagen) ===== */
.collections{
  /* Imagen de fondo configurable por custom property */
  --bg: url('/build/img/collections-bg.webp');

  position: relative;
  isolation: isolate;
  color: var.$white;
  min-height: clamp(340px, 55vh, 480px);
  display: grid;
  align-items: center;
  overflow: hidden;

  /* Capa: imagen */
  &::before{
    content: "";
    position: absolute;
    inset: 0;
    background: var(--bg) center/cover no-repeat;
    z-index: -2;
    transform: translateZ(0);
  }

  /* Capa: oscurecido suave */
  &::after{
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,.55);
    z-index: -1;
  }
}

.collections__inner{
  display: grid;
  grid-template-columns: minmax(0, 1.3fr) auto;
  gap: clamp(1.5rem, 5vw, 3rem);
  align-items: center;
}

/* Texto */
.collections__copy{
  max-width: 60ch;
}
.collections__copy h2{
  margin: 0 0 1rem;
  font-weight: var.$black-f;
  font-size: clamp(1.9rem, 3.4vw, 2.6rem);
  line-height: 1.1;
}
.collections__copy p{
  font-size: clamp(1rem, 1.3vw, 1.15rem);
  line-height: 1.7;
}

/* Tarjeta de imagen derecha */
.collections__media{
  margin: 0;
  width: clamp(240px, 30vw, 360px);
  border-radius: 24px;
  overflow: hidden;
  box-shadow: 0 16px 40px rgba(0,0,0,.35);
}
.collections__media img{
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Responsive */
@media (max-width: 900px){
  .collections{
    text-align: left;
  }
  .collections__inner{
    grid-template-columns: 1fr;
  }
  .collections__media{
    justify-self: flex-start;
  }
}


/* ===== Sales ===== */

.sales {
  background: var.$bg-light-2; // si quieres fondo blanco puro: var.$white;
}

/* TOP */

.sales__top {
  display: grid;
  grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
  gap: clamp(2rem, 5vw, 3rem);
  align-items: center;
  margin-bottom: clamp(2.5rem, 6vw, 3.5rem);
}

.sales__top-media {
  position: relative;
  max-width: 520px;
}

.sales__img {
  display: block;
  width: 100%;
  height: auto;
  object-fit: cover;
  border-radius: 1.25rem;
  box-shadow: 0 14px 30px rgba(0,0,0,.18);
}


.sales__img--small {
  position: absolute;
  right: clamp(1rem, 3vw, 1.5rem);
  bottom: clamp(-3rem, -4vw, -2.5rem);
  width: 46%;
  border-radius: 1.25rem;
}

/* Texto top */

.sales__top-copy h2 {
  margin: 0 0 1rem;
  font-size: clamp(2rem, 3.2vw, 2.6rem);
  font-weight: var.$bold;
  text-align: center;
}

.sales__top-copy p {
  max-width: 34ch;
  margin: 0 auto;
  text-align: justify;
  font-size: clamp(1.2rem, 1.4vw, 1.4rem);
  line-height: 1.7;
}

/* BOTTOM */

.sales__bottom {
  display: grid;
  grid-template-columns: minmax(0, 1.1fr) auto;
  gap: clamp(2rem, 5vw, 3rem);
  align-items: center;
  margin-top: clamp(3rem, 6vw, 4rem);
}

.sales__bottom-copy h3 {
  margin: 0 0 .5rem;
  font-size: clamp(1.4rem, 2vw, 1.6rem);
  font-weight: var.$bold;
}

.sales__bottom-copy p {
  margin: 0 0 1.4rem;
  max-width: 44ch;
  font-size: clamp(1.2rem, 1.4vw, 1.4rem);
  line-height: 1.7;
}

.sales__note {
    text-align: center;
    font-weight: var.$bold;
}

.sales__leaf {
  margin: 0;
  width: clamp(180px, 20vw, 340px);   /* más estrecha */
  aspect-ratio: 0.75 / 1;            /* más alta (relación vertical) */
  border-radius: 0 0 999px 999px;
  overflow: hidden;
  box-shadow: 0 16px 40px rgba(0,0,0,.25);
}

.sales__leaf img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}


/* Responsive */

@media (max-width: 900px) {

  .sales__top {
    grid-template-columns: 1fr;
    text-align: center;
  }

  .sales__top-media {
    margin: 0 auto clamp(3rem, 8vw, 4rem);
  }

  .sales__top-copy p {
    max-width: 40ch;
  }

  .sales__bottom {
    grid-template-columns: 1fr;
  }

  .sales__leaf {
    justify-self: center;
  }

  .sales__bottom-copy {
    text-align: left;
  }
}

/* ===== Clients / Logos ===== */

.clients {
    position: relative;
    color: var.$black;
    background:#f5f5f5;
    background-size: cover;
    background-position: center;
}

.clients__overlay{
  padding-block: clamp(3rem, 8vh, 5rem);
  backdrop-filter: blur(2px);
}

.clients__inner{
  text-align: center;
  max-width: 1000px;
  margin-inline: auto;
}

.clients__title{
  font-weight: var.$black-f;
  font-size: clamp(1.8rem, 3vw, 2.3rem);
  margin-bottom: 1rem;
}

.clients__text{
  font-size: 1rem;
  line-height: 1.6;
  margin-bottom: clamp(2rem, 4vh, 2.5rem);
}

/* Carrusel */

.clients__carousel{
  position: relative;
  overflow: hidden;
  padding-block: 1.5rem;
}

.clients__track{
  display: flex;
  align-items: center;
  gap: clamp(2.5rem, 5vw, 4rem);
  animation: clients-slide 28s linear infinite;
}

.clients__carousel:hover .clients__track{
  animation-play-state: paused;
}

.clients__logo{
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  padding-inline: .5rem;
}

.clients__logo img{
  max-height: 260px;
  width: auto;
  display: block;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.35));
}

/* Animación de scroll continuo */
@keyframes clients-slide{
  0%   { transform: translateX(0); }
  100% { transform: translateX(-50%); } // depende de cuántos logos dupliques
}

/* Respeto a usuarios con reduce motion */
@media (prefers-reduced-motion: reduce){
  .clients__track{
    animation: none;
  }
}

/* Barra inferior CTA */

.clients__cta{
  background: linear-gradient(90deg, #0b4eea, #0058ff);
  padding-block: .9rem;
}

.clients__cta-inner{
  display: flex;
  align-items: center;
  justify-content: center;
  gap: .75rem;
  font-size: .95rem;
  color: var.$white;
}

.clients__cta-btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: .45rem 1.1rem;
  border-radius: 999px;
  background: var.$white;
  color: #0050dd;
  font-weight: var.$bold;
  font-size: .9rem;
  text-decoration: none;
  box-shadow: 0 6px 16px rgba(0,0,0,.25);
  transition: transform .2s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
}

.clients__cta-btn:hover{
  transform: translateY(-1px);
  box-shadow: 0 10px 24px rgba(0,0,0,.3);
  background: #001f66;
  color: var.$white;
}

@media (max-width: 768px){
  .clients__cta-inner{
    flex-direction: column;
  }
}